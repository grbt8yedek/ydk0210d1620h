# GRBT8 Seyahat Sitesi Projesi - Deployment DokÃ¼mantasyonu

## Proje Genel Bilgileri

**Proje AdÄ±:** GRBT8 Seyahat Sitesi  
**Proje TÃ¼rÃ¼:** Next.js Seyahat Rezervasyon Sistemi  
**VeritabanÄ±:** Neon PostgreSQL  
**Deployment Platform:** Vercel  

## Repository ve Deployment Bilgileri

### Git Repository
- **GitHub Adresi:** https://github.com/Depogrbt8/grbt8
- **Branch:** main
- **Son Commit:** Proje tam yedek - GitHub'a yÃ¼kleme

### Vercel Deployment
- **Vercel Adresi:** ur
https://vercel.com/grbt8/grbt8
- **Domain:** grbt8.vercel.app (tahmini)
- **Platform:** Vercel

## Deployment Stratejisi

### AI Asistan Destekli Deployment SÃ¼reci

1. **Otomatik Push ve Deploy:**
   - AI asistan kodlarÄ± GitHub'a push eder
   - Vercel otomatik deploy kapali  asistan manuel olarak GitHub'dan Ã§eker ve deploy eder
   - Hata Ã§Ä±ktÄ±ÄŸÄ±nda AI asistan otomatik dÃ¼zeltme yapar

2. **Hata YÃ¶netimi:**
   - Vercel build hatalarÄ± GitHub'a bildirilir
   - AI asistan hatalarÄ± analiz eder
   - Gerekli dÃ¼zeltmeleri yapar ve tekrar push eder
   - SÃ¼reÃ§ hata Ã§Ã¶zÃ¼lene kadar devam eder

3. **Sistem UyumluluÄŸu:**
   - TÃ¼m kodlar Vercel platformuna uygun hale getirilir
   - Next.js optimizasyonlarÄ± yapÄ±lÄ±r
   - Build sÃ¼reci sorunsuz Ã§alÄ±ÅŸacak ÅŸekilde dÃ¼zenlenir

## VeritabanÄ± KonfigÃ¼rasyonu

### Neon PostgreSQL Entegrasyonu

**VeritabanÄ±:** Neon PostgreSQL  
**BaÄŸlantÄ±:** Prisma ORM ile  
**Schema:** `prisma/schema.prisma`  

### ğŸ›¡ï¸ VERÄ°TABANI KORUMA SÄ°STEMÄ°

**Ã–NEMLÄ°:** AI AsistanlarÄ±n veritabanÄ± iÅŸlemlerini engellemek iÃ§in koruma sistemi aktif!

#### YasaklÄ± Komutlar:
- `prisma db push --force-reset`
- `prisma migrate reset`
- `prisma db push --accept-data-loss`
- `DROP TABLE`, `TRUNCATE TABLE`
- `DELETE FROM users/passengers/reservations`

#### KorunmasÄ± Gereken Tablolar:
- users, passengers, reservations, flights, airlines, airports

#### Koruma KurallarÄ±:
1. **Production'da:** HiÃ§bir veritabanÄ± silme iÅŸlemi yapÄ±lamaz
2. **Development'da:** Onay istenir + otomatik backup alÄ±nÄ±r
3. **Schema deÄŸiÅŸikliklerinde:** Ã–zel onay gerekir
4. **Backup:** Her tehlikeli iÅŸlem Ã¶ncesi otomatik backup

#### KullanÄ±m:
```bash
# Komut kontrolÃ¼
node scripts/prisma-guard.js "prisma db push"

# Otomatik backup
npm run backup:auto

# GÃ¼venli Prisma komutlarÄ±
npm run prisma:push
npm run prisma:migrate
```

#### AI Asistan KurallarÄ±:
1. **ASLA** `prisma db push --force-reset` kullanmayÄ±n
2. **ASLA** `prisma migrate reset` kullanmayÄ±n  
3. **ASLA** `DROP TABLE` komutlarÄ± kullanmayÄ±n
4. **ASLA** `DELETE FROM` ile toplu silme yapmayÄ±n
5. **HER ZAMAN** `npm run` script'lerini kullanÄ±n
6. **VERÄ°TABANI DEÄÄ°ÅÄ°KLÄ°ÄÄ°NDEN Ã–NCE** backup alÄ±n

#### Gerekli Environment Variables:
```env
DATABASE_URL="postgresql://username:password@host:port/database?sslmode=require"
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="https://grbt8.vercel.app"
```

#### VeritabanÄ± MigrasyonlarÄ±:
- TÃ¼m migration dosyalarÄ± `prisma/migrations/` klasÃ¶rÃ¼nde mevcut
- Vercel deploy sÄ±rasÄ±nda otomatik migrate edilecek
- Production veritabanÄ± Neon'da kurulacak

## Teknik Gereksinimler

### Next.js KonfigÃ¼rasyonu
- **Framework:** Next.js 14+
- **TypeScript:** Aktif
- **Tailwind CSS:** Styling
- **Prisma:** Database ORM

### Vercel OptimizasyonlarÄ±
- **Build Command:** `npm run build`
- **Output Directory:** `.next`
- **Node.js Version:** 18.x
- **Install Command:** `npm install`

### API Routes
- **Backend API:** `/src/app/api/` klasÃ¶rÃ¼nde
- **BiletDukkani API:** Entegre edilmiÅŸ
- **Authentication:** NextAuth.js ile

## Deployment Checklist

### Ã–ncesi HazÄ±rlÄ±k
- [ ] Neon PostgreSQL veritabanÄ± kurulumu
- [ ] Environment variables ayarlanmasÄ±
- 

## Hata Ã‡Ã¶zÃ¼m SÃ¼reci
prisma db push --force-reset g gibi buyuk islemler , birseyler resetlenecekse silinecekse, haber edilecek, yedek alinacak

### AI Asistan Hata YÃ¶netimi

1. **Build HatalarÄ±:**
   - TypeScript hatalarÄ± otomatik dÃ¼zeltilir
   - Import path'leri dÃ¼zenlenir
   - Dependency sorunlarÄ± Ã§Ã¶zÃ¼lÃ¼r

2. **Runtime HatalarÄ±:**
   - API endpoint hatalarÄ± dÃ¼zeltilir
   - Database connection sorunlarÄ± Ã§Ã¶zÃ¼lÃ¼r
   - Environment variable eksiklikleri tamamlanÄ±r

3. **Performance SorunlarÄ±:**
   - Bundle size optimizasyonu
   - Image optimization
   - Caching stratejileri

## Monitoring ve Maintenance

### Vercel Analytics
- **Performance:** Vercel Analytics ile izleme
- **Errors:** Vercel Error Tracking
- **Uptime:** Vercel Status Page

### Database Monitoring
- **Neon Console:** VeritabanÄ± performansÄ±
- **Query Performance:** Prisma query optimization
- **Connection Pooling:** Neon connection management

## GÃ¼venlik

### Environment Variables
- TÃ¼m hassas bilgiler environment variables'da
- Vercel'de gÃ¼venli ÅŸekilde saklanÄ±r
- GitHub'da expose edilmez

### API Security
- CSRF protection aktif
- Rate limiting uygulanÄ±r
- Input validation yapÄ±lÄ±r

## Backup ve Recovery

### Code Backup
- GitHub'da otomatik backup
- Branch protection rules
- Pull request reviews

### Database Backup
- Neon otomatik backup
- Point-in-time recovery
- Cross-region replication

## Database ve Storage KonfigÃ¼rasyonu

### Ã–nemli Not: Tek Database KullanÄ±mÄ±
**AI Asistan iÃ§in Kritik Bilgi:** Bu projede database ve storage iÃ§in aynÄ± Neon PostgreSQL veritabanÄ± kullanÄ±lmaktadÄ±r. AyrÄ± bir storage servisi (Redis, MongoDB, vs.) kullanÄ±lmamaktadÄ±r.

### Neon PostgreSQL - Hem Database Hem Storage
- **Database:** TÃ¼m uygulama verileri (kullanÄ±cÄ±lar, rezervasyonlar, Ã¶demeler)
- **Storage:** Session verileri, cache, geÃ§ici veriler
- **Tek BaÄŸlantÄ±:** Prisma ORM Ã¼zerinden tek DATABASE_URL ile eriÅŸim
- **Vercel Entegrasyonu:** Vercel Neon PostgreSQL template kullanÄ±lÄ±yor

### AI Asistan KurallarÄ±:
1. **Storage Ä°Ã§in AyrÄ± Servis Ã–nerme:** Redis, MongoDB, Supabase Storage gibi ayrÄ± servisler Ã¶nerilmemeli
2. **Tek Database MantÄ±ÄŸÄ±:** TÃ¼m veriler Neon PostgreSQL'de saklanmalÄ±
3. **Prisma Schema:** Storage ihtiyaÃ§larÄ± iÃ§in Prisma modelleri kullanÄ±lmalÄ±
4. **Session Management:** NextAuth.js session'larÄ± Neon'da saklanmalÄ±
5. **Cache Stratejisi:** Database tabanlÄ± cache implementasyonu yapÄ±lmalÄ±

### Environment Variables (Storage Dahil):
```env
DATABASE_URL="postgresql://neondb_owner:npg_IpbdP9an2jlm@ep-icy-mode-ag8baxgo-pooler.c-2.eu-central-1.aws.neon.tech/neondb?sslmode=require"
NEXTAUTH_SECRET="grbt8-nextauth-secret-key-2025"
NEXTAUTH_URL="https://anasite.grbt8.store"
```

**Ã–nemli:** AI asistan bu bilgiyi her zaman gÃ¶z Ã¶nÃ¼nde bulundurmalÄ± ve ayrÄ± storage servisleri Ã¶nermemelidir.

---

**Son GÃ¼ncelleme:** 2025-01-09  
**Deployment Durumu:** HazÄ±r  
**AI Asistan:** Aktif  

Bu dokÃ¼mantasyon, GRBT8 seyahat sitesinin Vercel'e sorunsuz deployment'Ä± iÃ§in gerekli tÃ¼m bilgileri iÃ§erir. AI asistan bu bilgileri kullanarak otomatik deployment ve hata yÃ¶netimi yapacaktÄ±r.